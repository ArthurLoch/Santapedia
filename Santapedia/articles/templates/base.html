{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"> 

    


    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    {% block 'css' %}{% endblock %}

    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'img/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'img/site.webmanifest' %}">

    <title>{% block 'title'%}{% endblock %}</title>
</head>
<body>
  
  <div class="wrapper">
    <header>
      <!-- Navbar -->
      <nav class="navbar navbar-light">
        <!-- Menu -->
        <div class="dropdown" id="menu">
          <button type="button" data-toggle="dropdown" aria-expanded="false" id="menu-button"><i class="bi bi-list"></i></button>
          <div class="dropdown-menu">
            <span class="dropdown-item-text">{% trans "Menu principal" %}</span>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{% url 'home' %}">{% trans "Página principal" %}</a>
            <a class="dropdown-item" href="{% url 'saints' %}">{% trans "Santos" %}</a>
            <a class="dropdown-item" href="{% url 'aleatory' %}">{% trans "Santo aleatório" %}</a>
            <a class="dropdown-item" href="{% url 'prayers' %}">{% trans "Orações" %}</a>
            <a class="dropdown-item" href="{% url 'patronized_cities' %}">{% trans "Padroeiro da Cidade" %}</a>
            <a class="dropdown-item" href="{% url 'calendar' %}">{% trans "Calendário Litúrgico" %}</a>
            <a class="dropdown-item" href="{% url 'santapedia' %}">{% trans "Sobre a Santapédia" %}</a>
            <a class="dropdown-item" href="{% url 'contact' %}">{% trans "Contato" %}</a>

            <!-- For Mobile -->
            <!-- Set Language -->
          <div class="dropdown-item d-md-none">
            {% if request.LANGUAGE_CODE == "pt-br" %}
              <form action="{% url 'set_language' %}" method="post" class="language-switch">
                {% csrf_token %}
                <input type="hidden" name="language" value="en">
                <input type="hidden" name="next" value="{{ request.get_full_path }}">
                <button type="submit" class="lang-btn">
                    <img src="{% static 'img/us.png' %}" alt="American flag" class="flag-icon"> English
                </button>
            </form>
            {% else %}
            <form action="{% url 'set_language' %}" method="post" class="language-switch">
                {% csrf_token %}
                <input type="hidden" name="language" value="pt-br">
                <input type="hidden" name="next" value="{{ request.get_full_path }}">
                <button type="submit" class="lang-btn">
                  <img src="{% static 'img/br.png' %}" alt="Brazilian flag" class="flag-icon"> Português
                </button>
            </form>
            {% endif %}

            
          </div>

            <div class="dropdown-item d-md-none">
              <!-- Dark/Light Mode -->
              <button class="theme-toggle-mobile">
                <i class="bi bi-moon-fill"></i>
              </button>
            </div>

          </div>
        </div>
          
            


        <!-- Logo -->
        <a style="display: flex;" href="{% url 'home' %}" id="logo" aria-label="{% trans 'Logo da Santapédia' %}">
          {% if request.LANGUAGE_CODE == 'en' %}
            <img src="{% static 'img/logo-1-en.png' %}" width="195.3125" height="50" class="d-inline-block align-top" alt="{% trans 'Santapédia' %}">
          {% else %}
            <img src="{% static 'img/logo-1.png' %}" width="195.3125" height="50" class="d-inline-block align-top" alt="{% trans 'Santapédia' %}">
          {% endif %}
        </a>

        <!-- Searchbar -->
        <div class="search-container" style="display: flex; position: relative;">
          <form action="{% url 'saints' %}" method="get">
            <input style="display: none;" class="form-control" id="search_bar" type="search" placeholder="{% trans 'Pesquisar...' %}" autocomplete="off" name="q">
            <div id="suggestions" class="suggestions-list"></div>
            <button type="submit" style="display: none;" class="search" id="search_button">{% trans "Pesquisar" %}</button>
          </form>
          <button id="magnifying_glass"><i class="bi bi-search"></i></button>

        </div>

          <!-- Set Language -->
          {% if request.LANGUAGE_CODE == "pt-br" %}
            <form action="{% url 'set_language' %}" method="post" class="language-switch-desktop d-none d-md-block">
              {% csrf_token %}
              <input type="hidden" name="language" value="en">
              <input type="hidden" name="next" value="{{ request.get_full_path }}">
              <button type="submit" class="lang-btn">
                  <img src="{% static 'img/us.png' %}" alt="American flag" class="flag-icon"> English
              </button>
            </form>
          {% else %}
            <form action="{% url 'set_language' %}" method="post" class="language-switch d-none d-md-block">
              {% csrf_token %}
              <input type="hidden" name="language" value="pt-br">
              <input type="hidden" name="next" value="{{ request.get_full_path }}">
              <button type="submit" class="lang-btn">
                <img src="{% static 'img/br.png' %}" alt="Brazilian flag" class="flag-icon"> Português
              </button>
            </form>
          {% endif %}

          <!-- Dark/Light Mode -->
          <button class="theme-toggle-desktop d-none d-md-block">
            <i class="bi bi-moon-fill"></i>
          </button>
    
        </nav>
    </header>

    <main class="container">
      {% block 'body' %}
      {% endblock %}
    </main>

    <footer>
      <p>&copy; {% trans "2025 Santapédia - A Enciclopédia Católica" %}</p>
    </footer>
  </div>

  <div id="cookie-banner" class="cookie-banner">
    <p>
      {% trans "Usamos cookies para melhorar sua experiência e analisar o tráfego do site." %}
      <a href="{% url 'privacy_policy' %}">{% trans "Política de Privacidade" %}</a>.
    </p>

    <div class="cookie-actions">
      <button id="accept-cookies">{% trans "Aceitar" %}</button>
      <button id="reject-cookies" class="secondary">{% trans "Rejeitar" %}</button>
    </div>
  </div>


  <script>
    window.SEARCH_URL = "{% url 'search_suggestions' %}";
    window.currentLanguage = '{{ request.LANGUAGE_CODE }}'
  </script>
  <script src="{% static 'js/scripts.js' %}"></script>
  
</body>
</html>